<script lang="ts">
    import { timeline } from 'motion';
    import type { TimelineDefinition, TimelineOptions } from 'motion';
    import { onMount } from 'svelte';

    const seq:TimelineDefinition = [
        ["#IconPrompt", {fill: ['black', '#22C55E']}, {duration: 1}],
        ["#Progress1", {transform: 'translate(120px, 0)', opacity: [0, 1, 0]}, {duration: 2}],
        ["#IconPrompt", {fill: ['black']}, {duration: 1, at: 1.5}],

        ["#IconAI", {fill: ['black', '#22C55E']}, {duration: 1, at: 2}],
        ["#Progress2", {transform: 'translate(120px, 0)', opacity: [0, 1, 0]}, {duration: 2}],
        ["#IconAI", {fill: ['black']}, {duration: 1, at: 3.5}],

        ["#IconCauldron", {fill: ['black', '#22C55E', null, 'black']}, {duration: 3, at: 4}],
    ]

    onMount(() => {
        timeline(seq, { loop: Infinity, repeat: Infinity, endDelay: 5 } as TimelineOptions);
    });
</script>

<svg width="100%" viewBox="0 0 520 224" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g clip-path="url(#clip0_93_1140)">
        <line x1="236.5" y1="20" x2="236.5" y2="204" stroke="#F4F4F5" />
        <line x1="352" y1="88.5" x2="168" y2="88.5" stroke="#F4F4F5" />
        <line x1="283.5" y1="20" x2="283.5" y2="204" stroke="#F4F4F5" />
        <line x1="352" y1="135.5" x2="168" y2="135.5" stroke="#F4F4F5" />
        <line x1="55.5" y1="80" x2="55.5" y2="264" stroke="#F4F4F5" />
        <line x1="171" y1="148.5" x2="-13" y2="148.5" stroke="#F4F4F5" />
        <line x1="102.5" y1="80" x2="102.5" y2="264" stroke="#F4F4F5" />
        <line x1="171" y1="195.5" x2="-13" y2="195.5" stroke="#F4F4F5" />
        <line x1="418.5" y1="-41" x2="418.5" y2="143" stroke="#F4F4F5" />
        <line x1="533" y1="27.5" x2="349" y2="27.5" stroke="#F4F4F5" />
        <line x1="465.5" y1="-41" x2="465.5" y2="143" stroke="#F4F4F5" />
        <line x1="533" y1="74.5" x2="349" y2="74.5" stroke="#F4F4F5" />
        <rect x="55.5" y="148.5" width="47" height="47" rx="6.5" fill="white" />
        <path
            d="M88.75 163.75V180.25H69.25V163.75H88.75ZM69.25 161.5H67V163.75V180.25V182.5H69.25H88.75H91V180.25V163.75V161.5H88.75H69.25ZM71.0359 167.945L71.8656 168.705L75.4609 172L71.8656 175.295L71.0359 176.055L72.5547 177.714L73.3844 176.955L77.8844 172.83L78.7891 172L77.8844 171.17L73.3844 167.045L72.5547 166.286L71.0359 167.945ZM78.625 175.75H77.5V178H78.625H85.375H86.5V175.75H85.375H78.625Z"
            fill="#22C55E"
            id="IconPrompt"
        />
        <rect x="55.5" y="148.5" width="47" height="47" rx="6.5" stroke="#E4E4E7" />
        <rect x="418.5" y="27.5" width="47" height="47" rx="6.5" fill="white" />
        <g clip-path="url(#clip1_93_1140)">
            <path
                d="M439 42C439.398 42 439.779 41.842 440.061 41.5607C440.342 41.2794 440.5 40.8978 440.5 40.5C440.5 40.1022 440.342 39.7206 440.061 39.4393C439.779 39.158 439.398 39 439 39C438.602 39 438.221 39.158 437.939 39.4393C437.658 39.7206 437.5 40.1022 437.5 40.5C437.5 40.8978 437.658 41.2794 437.939 41.5607C438.221 41.842 438.602 42 439 42ZM444.25 45C444.847 45 445.419 44.7629 445.841 44.341C446.263 43.919 446.5 43.3467 446.5 42.75C446.5 42.1533 446.263 41.581 445.841 41.159C445.419 40.7371 444.847 40.5 444.25 40.5C443.653 40.5 443.081 40.7371 442.659 41.159C442.237 41.581 442 42.1533 442 42.75C442 43.3467 442.237 43.919 442.659 44.341C443.081 44.7629 443.653 45 444.25 45ZM434.978 50.8359C435.428 50.0062 435.92 49.2797 436.319 48.75H442H447.681C448.08 49.2844 448.572 50.0109 449.022 50.8359C449.767 52.2047 450.25 53.5781 450.25 54.675C450.25 56.5125 449.392 57.9562 447.934 59.0109C446.42 60.1031 444.278 60.75 442 60.75C439.722 60.75 437.58 60.1031 436.066 59.0109C434.608 57.9562 433.75 56.5125 433.75 54.675C433.75 53.5828 434.233 52.2094 434.978 50.8359ZM433.591 48.75C432.555 50.4094 431.5 52.6312 431.5 54.675C431.5 56.4281 432.058 57.9281 433 59.1516V63H435.25V61.1719C437.144 62.3672 439.553 63 442 63C444.447 63 446.856 62.3672 448.75 61.1719V63H451V59.1516C451.942 57.9281 452.5 56.4281 452.5 54.675C452.5 52.6312 451.445 50.4094 450.409 48.75H452.5V46.5H448.75H442H435.25H431.5V48.75H433.591Z"
                fill="black"
                id="IconCauldron"
            />
        </g>
        <rect x="418.5" y="27.5" width="47" height="47" rx="6.5" stroke="#E4E4E7" />
        <path d="M79 140V112H222" stroke="#E4E4E7" />
        <path d="M441.5 83V111.5H298" stroke="#E4E4E7" />
        <rect x="236.5" y="88.5" width="47" height="47" rx="6.5" fill="white" />
        <g clip-path="url(#clip2_93_1140)">
            <path
                d="M261.125 101.125V100H258.875V101.125V104.5H251.75H249.5V106.75V121.75V124H251.75H268.25H270.5V121.75V106.75V104.5H268.25H261.125V101.125ZM258.875 106.75H261.125H268.25V121.75H251.75V106.75H258.875ZM248 110.5H245V119.5H248V110.5ZM275 110.5H272V119.5H275V110.5ZM254 118V119.5H254.75H256.25H257V118H256.25H254.75H254ZM260.75 118H259.25H258.5V119.5H259.25H260.75H261.5V118H260.75ZM263.75 118H263V119.5H263.75H265.25H266V118H265.25H263.75ZM258.125 112C258.125 111.503 257.927 111.026 257.576 110.674C257.224 110.323 256.747 110.125 256.25 110.125C255.753 110.125 255.276 110.323 254.924 110.674C254.573 111.026 254.375 111.503 254.375 112C254.375 112.497 254.573 112.974 254.924 113.326C255.276 113.677 255.753 113.875 256.25 113.875C256.747 113.875 257.224 113.677 257.576 113.326C257.927 112.974 258.125 112.497 258.125 112ZM263.75 113.875C264.247 113.875 264.724 113.677 265.076 113.326C265.427 112.974 265.625 112.497 265.625 112C265.625 111.503 265.427 111.026 265.076 110.674C264.724 110.323 264.247 110.125 263.75 110.125C263.253 110.125 262.776 110.323 262.424 110.674C262.073 111.026 261.875 111.503 261.875 112C261.875 112.497 262.073 112.974 262.424 113.326C262.776 113.677 263.253 113.875 263.75 113.875Z"
                fill="black"
                id="IconAI"
            />
        </g>
        <rect x="236.5" y="88.5" width="47" height="47" rx="6.5" stroke="#E4E4E7" />
        <rect x="80" y="111.5" width="16" height="1" fill="#16A34A" id="Progress1"/>
        <rect x="300" y="111.5" width="16" height="1" fill="#16A34A" id="Progress2" style="opacity: 0;"/>
    </g>
    <defs>
        <clipPath id="clip0_93_1140">
            <rect width="520" height="224" fill="white" />
        </clipPath>
        <clipPath id="clip1_93_1140">
            <rect width="21" height="24" fill="white" transform="translate(431.5 39)" />
        </clipPath>
        <clipPath id="clip2_93_1140">
            <rect width="30" height="24" fill="white" transform="translate(245 100)" />
        </clipPath>
    </defs>
</svg>
