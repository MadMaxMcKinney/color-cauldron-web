<script lang="ts">
    import { timeline } from 'motion';
    import type { TimelineDefinition, TimelineOptions } from 'motion';
    import { onMount } from 'svelte';

    const seq: TimelineDefinition = [
        ['#IconPrompt', { fill: ['black', '#22C55E'] }, { duration: 1 }],
        ['#Progress1', { transform: 'translate(120px, 0)', opacity: [0, 1, 0] }, { duration: 2 }],
        ['#IconPrompt', { fill: ['black'] }, { duration: 1, at: 1.5 }],

        ['#IconCauldron', { fill: ['black', '#22C55E'] }, { duration: 1, at: 2 }],
        ['#Progress2', { transform: 'translate(120px, 0)', opacity: [0, 1, 0] }, { duration: 2 }],
        ['#IconCauldron', { fill: ['black'] }, { duration: 1, at: 3.5 }],

        ['#IconResult', { fill: ['black', '#22C55E', null, 'black'] }, { duration: 3, at: 4 }]
    ];

    onMount(() => {
        timeline(seq, { loop: Infinity, repeat: Infinity, endDelay: 5 } as TimelineOptions);
    });
</script>

<svg width="100%" height="180" viewBox="0 0 520 224" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g clip-path="url(#clip0_103_172)">
        <line x1="231.074" y1="-0.800049" x2="231.074" y2="224.8" stroke="#E4E4E7" stroke-width="0.8" />
        <line x1="372.9" y1="82.974" x2="147.3" y2="82.974" stroke="#E4E4E7" stroke-width="0.8" />
        <line x1="288.7" y1="-0.800049" x2="288.7" y2="224.8" stroke="#E4E4E7" stroke-width="0.8" />
        <line x1="372.9" y1="140.6" x2="147.3" y2="140.6" stroke="#E4E4E7" stroke-width="0.8" />
        <rect x="54.6" y="134.6" width="56.4" height="56.4" rx="7.8" fill="white" />
        <g clip-path="url(#clip1_103_172)">
            <path
                d="M88.5531 162.412C89.3406 161.285 89.8 159.913 89.8 158.425C89.8 154.559 86.6664 151.425 82.8 151.425C78.9336 151.425 75.8 154.559 75.8 158.425C75.8 159.913 76.2594 161.285 77.0469 162.412C77.2492 162.702 77.4898 163.03 77.7469 163.38C78.4523 164.348 79.2945 165.507 79.9234 166.65C80.4922 167.689 80.782 168.772 80.9242 169.795H78.2609C78.1406 169.138 77.9383 168.498 77.6156 167.908C77.0742 166.923 76.4016 165.999 75.7289 165.075C75.4445 164.687 75.1601 164.298 74.8867 163.905C73.8094 162.357 73.175 160.465 73.175 158.425C73.175 153.109 77.4844 148.8 82.8 148.8C88.1156 148.8 92.425 153.109 92.425 158.425C92.425 160.465 91.7906 162.357 90.7078 163.91C90.4344 164.304 90.15 164.692 89.8656 165.081C89.193 165.999 88.5203 166.923 87.9789 167.913C87.6562 168.504 87.4539 169.144 87.3336 169.8H84.6812C84.8234 168.777 85.1133 167.689 85.682 166.656C86.3109 165.513 87.1531 164.353 87.8586 163.385C88.1156 163.035 88.3508 162.707 88.5531 162.417V162.412ZM78.425 176.8V171.55H87.175V176.8H78.425ZM83.675 155.8V160.175V161.05H81.925V160.175V155.8V154.925H83.675V155.8ZM83.675 162.8V164.55H81.925V162.8H83.675ZM70.0742 149.675L70.4023 149.894L71.7148 150.769L72.8086 151.496L71.3539 153.684L70.2601 152.956L68.9476 152.081L68.6195 151.863L67.5258 151.135L68.9805 148.948L70.0742 149.675ZM96.9805 151.863L96.6523 152.081L95.3398 152.956L94.2461 153.684L92.7914 151.496L93.8851 150.769L95.1976 149.894L95.5258 149.675L96.6195 148.948L98.0742 151.13L96.9805 151.863ZM66.6125 157.55H69.2375H70.55V160.175H69.2375H66.6125H65.3V157.55H66.6125ZM96.3625 157.55H98.9875H100.3V160.175H98.9875H96.3625H95.05V157.55H96.3625ZM71.7148 166.956L70.4023 167.831L70.0742 168.05L68.9805 168.777L67.5258 166.59L68.6195 165.863L68.9476 165.644L70.2601 164.769L71.3539 164.041L72.8086 166.223L71.7148 166.951V166.956ZM95.3398 164.774L96.6523 165.649L96.9805 165.868L98.0742 166.595L96.6195 168.777L95.5258 168.05L95.1976 167.831L93.8851 166.956L92.7914 166.229L94.2461 164.047L95.3398 164.774Z"
                fill="#00C853"
                id="IconPrompt"
            />
        </g>
        <rect x="54.6" y="134.6" width="56.4" height="56.4" rx="7.8" stroke="#E4E4E7" stroke-width="1.2" />
        <rect x="408.5" y="31.8" width="56.4" height="56.4" rx="7.8" fill="white" />
        <g clip-path="url(#clip2_103_172)">
            <path
                d="M422.7 67.875C422.7 71.2602 425.44 74 428.825 74H449.388H450.7V72.6875V63.0625V61.75H449.388H443.804L448.124 57.4297L449.054 56.5L448.124 55.5703L441.13 48.5703L440.2 47.6406L439.27 48.5703L434.95 52.8906V47.3125V46H433.638H424.013H422.7V47.3125V67.875ZM434.179 71.375L441.179 64.375H448.075V71.375H434.179ZM445.346 56.5L434.95 66.8961V56.6039L440.2 51.3539L445.346 56.5ZM428.825 71.375C426.895 71.375 425.325 69.8055 425.325 67.875V62.625H432.325V67.875C432.325 69.8055 430.755 71.375 428.825 71.375ZM425.325 60V55.625H432.325V60H425.325ZM425.325 53V48.625H432.325V53H425.325ZM428.825 69.1875C428.997 69.1875 429.168 69.1536 429.327 69.0876C429.487 69.0216 429.631 68.925 429.753 68.8031C429.875 68.6812 429.972 68.5365 430.038 68.3773C430.104 68.218 430.138 68.0474 430.138 67.875C430.138 67.7026 430.104 67.532 430.038 67.3727C429.972 67.2135 429.875 67.0688 429.753 66.9469C429.631 66.825 429.487 66.7284 429.327 66.6624C429.168 66.5964 428.997 66.5625 428.825 66.5625C428.653 66.5625 428.482 66.5964 428.323 66.6624C428.164 66.7284 428.019 66.825 427.897 66.9469C427.775 67.0688 427.678 67.2135 427.612 67.3727C427.546 67.532 427.513 67.7026 427.513 67.875C427.513 68.0474 427.546 68.218 427.612 68.3773C427.678 68.5365 427.775 68.6812 427.897 68.8031C428.019 68.925 428.164 69.0216 428.323 69.0876C428.482 69.1536 428.653 69.1875 428.825 69.1875Z"
                fill="black"
                id="IconResult"
            />
        </g>
        <rect x="408.5" y="31.8" width="56.4" height="56.4" rx="7.8" stroke="#E4E4E7" stroke-width="1.2" />
        <path d="M82.5 134.4V112H229.7" stroke="#E4E4E7" stroke-width="0.8" />
        <path d="M437 88.8V111.6H290.5" stroke="#E4E4E7" stroke-width="0.8" />
        <rect x="231.7" y="84" width="56.4" height="56.4" rx="7.8" fill="white" />
        <g clip-path="url(#clip3_103_172)">
            <path
                d="M256.3 101.4C256.777 101.4 257.235 101.21 257.573 100.873C257.91 100.535 258.1 100.077 258.1 99.6C258.1 99.1227 257.91 98.6648 257.573 98.3273C257.235 97.9897 256.777 97.8 256.3 97.8C255.823 97.8 255.365 97.9897 255.027 98.3273C254.69 98.6648 254.5 99.1227 254.5 99.6C254.5 100.077 254.69 100.535 255.027 100.873C255.365 101.21 255.823 101.4 256.3 101.4ZM262.6 105C263.316 105 264.003 104.716 264.509 104.209C265.016 103.703 265.3 103.016 265.3 102.3C265.3 101.584 265.016 100.897 264.509 100.391C264.003 99.8845 263.316 99.6 262.6 99.6C261.884 99.6 261.197 99.8845 260.691 100.391C260.184 100.897 259.9 101.584 259.9 102.3C259.9 103.016 260.184 103.703 260.691 104.209C261.197 104.716 261.884 105 262.6 105ZM251.474 112.003C252.014 111.008 252.604 110.136 253.082 109.5H259.9H266.717C267.196 110.141 267.786 111.013 268.326 112.003C269.221 113.646 269.8 115.294 269.8 116.61C269.8 118.815 268.771 120.548 267.021 121.813C265.204 123.124 262.634 123.9 259.9 123.9C257.166 123.9 254.596 123.124 252.779 121.813C251.029 120.548 250 118.815 250 116.61C250 115.299 250.579 113.651 251.474 112.003ZM249.809 109.5C248.566 111.491 247.3 114.158 247.3 116.61C247.3 118.714 247.969 120.514 249.1 121.982V126.6H251.8V124.406C254.072 125.841 256.964 126.6 259.9 126.6C262.836 126.6 265.727 125.841 268 124.406V126.6H270.7V121.982C271.831 120.514 272.5 118.714 272.5 116.61C272.5 114.158 271.234 111.491 269.991 109.5H272.5V106.8H268H259.9H251.8H247.3V109.5H249.809Z"
                fill="black"
                id="IconCauldron"
            />
        </g>
        <rect x="231.7" y="84" width="56.4" height="56.4" rx="7.8" stroke="#E4E4E7" stroke-width="1.2" />
        <rect x="80" y="111.6" width="24" height="0.8" fill="#16A34A" id="Progress1" />
        <rect x="290" y="111.6" width="24" height="0.8" fill="#16A34A" id="Progress2" />
    </g>
    <defs>
        <clipPath id="clip0_103_172">
            <rect width="520" height="224" fill="white" />
        </clipPath>
        <clipPath id="clip1_103_172">
            <rect width="35" height="28" fill="white" transform="translate(65.3 148.8)" />
        </clipPath>
        <clipPath id="clip2_103_172">
            <rect width="28" height="28" fill="white" transform="translate(422.7 46)" />
        </clipPath>
        <clipPath id="clip3_103_172">
            <rect width="25.2" height="28.8" fill="white" transform="translate(247.3 97.8)" />
        </clipPath>
    </defs>
</svg>
